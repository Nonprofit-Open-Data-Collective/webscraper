"02-0538937", "02-0594382", "02-0653283", "02-0729067", "02-0760556",
"02-0764719", "02-0785015"), ORGNAME = c("GOODWINS MILLS FIREFIGHTERS RELIEFASSOCIATION",
"MAINE WELFARE DIRECTORS ASSOCIATION ", "MAINE MYCOLOGICAL ASSOCIATION INC ",
"BUCKSPORT AREA CULTURAL ARTS SOCIETY- BACAS", "PORTLAND RUGBY FOOTBALL CLUB ",
"KENNESAW MOUNTAIN HIGH SCHOOL TRACKFIELD BOOSTER CLUB INC",
"WALNUT BEND ELEMENTARY SCHOOL PARENT-TEACHER ORGANIZATION",
"FLORIDA CERT ASSOCIATION", "LADY EAGLE BASKETBALL BOOSTER CLUB",
"GRAND FORKS DOG TRAINING CLUB", "YOUTH OF UNITY Y O U INC",
"LAKEVILLE YOUTH FOOTBALL  CHEERLEADING", "GATE CITY HARLEY OWNERS GROUP",
"FOREST PRESERVE USERS INC", "THE HERITAGE EDUCATION GROUP",
"HABITAT FOR HUMANITY OF ELLIS COUNTY INC", "GO SOUNDS PAA INC",
"NORTHEAST TEXAS EMMAUS INC", "CHIPPEWA FALLS CARDINAL HOOPS",
"JOE UFF CANCER FOUNDATION INC "), ORGURL = c("HTTP://GMFD.ORG/GMFRA/GMFRAINDEX.HTM",
"WWW.MAINEWELFAREDIRECTORS.ORG", "MAINELYMUSHROOMS.ORG", "WWW.BACASMAINE.ORG",
"WWW.PORTLANDRFC.COM", "WWW.KMHSTRACKFIELD.COM", "WWW.WBE-PTO.ORG",
"HTTP://WWW.FLACERTASSOCIATION.ORG", "WWW.LADYEAGLEBASKETBALL.NET",
"GRANDFORKSDOGTRAININGCLUB.ORG", "WWW.UNITYOFYOUTH.ORG", "HTTP://WWW.LVYOUTH.COM",
"GATECITYHOG.COM", "WWW.FORESTPRESERVEUSERSSNOWCLUB.COM", "WWW.HERITAGEEDUCATIONGROUP.ORG",
"HTTPS://WWW.FACEBOOK.COM/HFHEC", "WWW.GOSOUNDSINC.COM", "WWW.NETEMMAUS.ORG",
"WWW.CARDINALHOOPS.ORG", "WWW.UFFISTOUGH.COM")), class = "data.frame", row.names = c(NA,
-20L))
View(sample.urls)
roxygenize()
library(webscraper)
load_test_urls()
roxygenize()
library(webscraper)
load_test_urls()
create_root_url <- function(input.URL){
root_URL <- paste0("http://", httr::parse_url(temp)$hostname)
return( root_URL )
}
create_root_url(sample.urls$ORGURL)
httr::parse_url(sample.urls$ORGURL)
httr::parse_url(sample.urls$ORGURL[1])
httr::parse_url(sample.urls$ORGURL[1])$hostname
sample.urls$ORGURL[1]
create_root_url <- function(input.URL){
root_URL <- paste0("http://", httr::parse_url(input.URL)$hostname)
return( root_URL )
}
create_root_url(sample.urls$ORGURL)
create_root_url(sample.urls$ORGURL[1])
create_table_01 <- function( input.URL ){
result <- list()
original_URL <- input.URL
normalized_URL <- normalize_url( input.URL )
http_status_code <- httr::GET( normalized_URL )$all_headers[[1]]$status
is_redirected <- as.integer( http_status_code/100 ) == 3
redirected_URL <- ifelse( is_redirected, get_redirected_url( normalized_URL ), NA )
root_URL <- create_root_url( normalized_URL )
active_URL <- NA
url_version <- NA
domain_status <- NA
if( check_url_status2( original_URL ) == "VALID" ){
active_URL <- original_URL
url_version <- "original"
domain_status <- check_url_status2( original_URL )
} else if( check_url_status2( normalized_URL ) == "VALID" ){
active_URL <- normalized_URL
url_version <- "normalized"
domain_status <- check_url_status2( normalized_URL )
} else if( is_redirected ){
if( check_url_status2( redirected_URL ) == "VALID" ){
active_URL <- redirected_URL
url_version <- "redirect"
domain_status <- check_url_status2( redirected_URL )
}
} else{
if( check_url_status2( root_URL ) == "VALID" ){
active_URL <- root_URL
url_version <- "root"
domain_status <- check_url_status2( root_URL )
}
result$org_id <- sample.urls$EIN[sample.urls$ORGURL == original_URL]
result$org_name <- sample.urls$ORGNAME[sample.urls$ORGURL == original_URL]
result$original_URL <- original_URL
result$normalized_URL <- normalized_URL
result$redirected_URL <- redirected_URL
result$root_URL <- root_URL
result$active_URL <- active_URL
result$url_version <- url_version
result$domain_status <- domain_status
return( result )
}
#' @title
#' Creates a root URL form an inputted URL
#' @description
#' Creates the root URL of a given URL. Function can only take a object of length 1 in order to work
#' @param input.URL Specified URL string
#' @return Root of imputted URL
#' @export
create_root_url <- function(input.URL){
root_URL <- paste0("http://", httr::parse_url(input.URL)$hostname)
return( root_URL )
}
create_table_01(sample.urls$ORGURL[1])
create_table_01(sample.urls$ORGURL[2])
create_table_01(sample.urls$ORGURL[3])
check_url_status2 <- function( input.URL ){
URL_Exists <- RCurl::url.exists( input.URL )
URL_Active <- "Success" == tryCatch( httr::http_status( httr::GET( input.URL ) )[[1]], error = function( e ){ NA } )
domain_status <- ifelse( URL_Exists && URL_Active, "VALID", ifelse( URL_Exists, "EXISTS", "DNE" ) )
return (domain_status)
}
create_table_01(sample.urls$ORGURL[3])
roxygenise()
library(webscraper)
roxygenize()
roxygenise()
library(webscraper)
load_test_urls()
create_table_01(sample.urls[1])
create_table_01(sample.urls[])
create_table_01(sample.urls$ORGURL)
create_table_01(sample.urls$ORGURL[1])
create_table_01(sample.urls$ORGURL[2])
save <- create_table_01(sample.urls$ORGURL[2])
View(sample.urls)
View(save)
roxygen2::roxygenize()
library(webscraper)
library(roxygen2)
roxygenize()
library(webscraper)
load_test_urls()
table <- create_root_url(sample.urls$ORGURL[1])
table
table <- create_table_01(sample.urls$ORGURL[1])
table <- create_table_01(sample.urls$ORGURL[2])
View(table)
getNodes(table[["normalized_URL"]])
x <- getNodes(table[["normalized_URL"]])
table <- create_table_01(sample.urls$ORGURL[3])
x <- getNodes(table[["normalized_URL"]])
html_page <- xml2::read_html( table[["normalized_URL"]] )
table[["normalized_URL"]]
library(xml2)
what <- read_html("http://mainelymushrooms.org")
View(what)
xml_child(what, 2)
what %>%  # read in the site as an HTML file
rvest::html_nodes( "a" ) %>% # return all nodes with links in them
rvest::html_attr( "href" )
done <- what %>%  # read in the site as an HTML file
rvest::html_nodes( "a" ) %>% # return all nodes with links in them
rvest::html_attr( "href" )
?webscraper
??webscraper
check_url_status(sample.urls$ORGURL)
check_url_status(sample.urls$ORGURL[1])
check_url_status2(sample.urls$ORGURL[1])
check_url_status2(sample.urls$ORGURL)
create_table_01(sample.urls$ORGURL)
create_table_01(sample.urls$ORGURL[1])
View(table)
View(what)
done
library(readr)
data <- read_csv("~/Desktop/report1656697230210.csv")
View(data)
table(data$`Is Initial Assessment`)
library(tidyverse)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1)
View(data)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1) %>%
count(`Organization Name`)
View(data)
c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK",)
# Functions
`%notin%` <- Negate(`%in%`)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US")) %>%
count(`Organization Name`)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US")) %>%
count(`Organization Name`)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household")) %>%
count(`Organization Name`)
View(data)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE) %>%
count(`Organization Name`)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DM1", "PA1", "LC1"))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE)
table(data$`WWC ID`)
`WWC ID` %in% c("DM1", "PA1", "GM1"))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DM1", "PA1", "GM1"))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DM1", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DM1", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0),
Diff = `Review Decision` - Review)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DM1", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0),
Diff = `Review Decision` - Review)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DM1", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0),
Diff = `Review Decision` - Response)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DM1", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0),
Diff = `Review Decision` - Response) %>%
group_by(`WWC ID`) %>%
summarize(mean = mean(Diff))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DM1", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0),
Diff = `Review Decision` - Response)
group_by(`WWC ID`) %>%
summarize(mean = mean(Diff))
group_by(`WWC ID`) %>%
summarize(mean = mean(Diff))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DG2", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0),
Diff = `Review Decision` - Response) %>%
group_by(`WWC ID`) %>%
summarize(mean = mean(Diff))
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DG2", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0),
Diff = `Review Decision` - Response) %>%
group_by(`WWC ID`) %>%
count(Diff)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DG2", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0),
Diff = `Review Decision` - Response) %>%
group_by(`WWC ID`) %>%
count(Diff) %>%
pivot_wider(names_from = Diff, values_from = n)
data <- read_csv("~/Desktop/report1656697230210.csv") %>%
filter(`Is Initial Assessment` == 1,
`Organization Name` %notin% c("_TestProvidencia, Chile", ",", ", , Brasil", ", Argentina", ", Trinidad and Tobago", "Fake Keith City", "Fakefergusonville, MT", "Results for America", "Results for America,", "RIL", "Test City, NY", "Test Village,", "Test Washington, DC", "test, DC", "Testing Registration, AK", "TestingPorto, CA", "testville, , Brasil", "Todd Household", "Tres de Febrero", "What Works Cities, Outside of US", "Certification City", "Dickens Household"),
is.na(`Review Decision`)==FALSE,
`WWC ID` %in% c("DG2", "PA1", "GM1")) %>%
mutate(Response = ifelse(Response=="Yes", 1, 0),
`Review Decision` = ifelse(`Review Decision`=="Yes", 1, 0),
Diff = `Review Decision` - Response) %>%
group_by(`WWC ID`) %>%
count(Diff) %>%
pivot_wider(names_from = Diff, values_from = n, values_fill = 0)
22/78
# Libraries
library(readxl)
library(tidyverse)
library(showtext)
# Aes
showtext_auto()
# Data
Data <- read_xlsx("~/Desktop/City Response/CitiesUsCaLa.xlsx")
View(Data)
# Data
Data <- read_xlsx("~/Desktop/City Response/CitiesUsCaLa.xlsx") %>%
filter(`Already Certified?`==FALSE)
# Data
Data <- read_xlsx("~/Desktop/City Response/CitiesUsCaLa.xlsx")
# Data
Data <- read_xlsx("~/Desktop/City Response/CitiesUsCaLa.xlsx") %>%
filter(`Already Certified?`== "Np")
# Data
Data <- read_xlsx("~/Desktop/City Response/CitiesUsCaLa.xlsx") %>%
filter(`Already Certified?`== "No")
# Data
Data <- read_xlsx("~/Desktop/City Response/CitiesUsCaLa.xlsx") %>%
filter(`Already Certified?`== "No") %>%
select(Region, City, TOTAL, Predicted)
# Data
Data <- read_xlsx("~/Desktop/City Response/CitiesUsCaLa.xlsx") %>%
filter(`Already Certified?`== "No") %>%
select(Region, City, TOTAL, Predicted) %>%
mutate(Predicted = ifelse(Predicted < 0, 0, Predicted))
library(webscraper)
load_test_urls()
check_url_status(sample.urls$1)
check_url_status(sample.urls$ORGURL[5])
check_url_status(sample.urls$ORGURL[3])
check_url_status2(sample.urls$ORGURL[3])
check_url_status2(sample.urls$ORGURL[5])
check_url_status2(sample.urls$ORGURL)
for(i in sample.urls$ORGURL){}
for(i in sample.urls$ORGURL){check_url_status2(i)}
print(check_url_status2(sample.urls$ORGURL))
print(check_url_status2(i))
for(i in sample.urls$ORGURL){print(check_url_status2(i))}
View(sample.urls)
normalize_url(sample.urls$ORGURL[1])
create_root_url("http://gmfd.org/gmfra/gmfraindex.htm")
create_table_01("westelm.com")
normalized_URL <- normalize_url( "westelm.com" )
http_status_code <- httr::GET( normalized_URL )$all_headers[[1]]$status
is_redirected <- as.integer( http_status_code/100 ) == 3
redirected_URL <- ifelse( is_redirected, get_redirected_url( normalized_URL ), NA )
get_redirected_url( normalized_URL )
httr::GET( "WWW.MAINEWELFAREDIRECTORS.ORG
" )$all_headers[[1]]$status
httr::GET( "WWW.MAINEWELFAREDIRECTORS.ORG" )$all_headers[[1]]$status
get_redirected_url( WWW.MAINEWELFAREDIRECTORS.ORG" )
get_redirected_url( "WWW.MAINEWELFAREDIRECTORS.ORG" )
create_root_url(get_redirected_url( normalized_URL ))
create_root_url("http://mainewelfaredirectors.org")
create_table_01 <- function( input.URL ){
result <- data.frame()
original_URL <- input.URL
normalized_URL <- normalize_url( input.URL )
http_status_code <- httr::GET( normalized_URL )$all_headers[[1]]$status
is_redirected <- as.integer( http_status_code/100 ) == 3
redirected_URL <- ifelse( is_redirected, get_redirected_url( normalized_URL ), NA )
root_URL <- create_root_url( normalized_URL )
active_URL <- NA
url_version <- NA
domain_status <- NA
if( check_url_status2( original_URL ) == "VALID" ){
active_URL <- original_URL
url_version <- "original"
domain_status <- check_url_status2( original_URL )
} else if( check_url_status2( normalized_URL ) == "VALID" ){
active_URL <- normalized_URL
url_version <- "normalized"
domain_status <- check_url_status2( normalized_URL )
} else if( is_redirected ){
if( check_url_status2( redirected_URL ) == "VALID" ){
active_URL <- redirected_URL
url_version <- "redirect"
domain_status <- check_url_status2( redirected_URL )
}
} else{
if( check_url_status2( root_URL ) == "VALID" ){
active_URL <- root_URL
url_version <- "root"
domain_status <- check_url_status2( root_URL )
}
result$org_id <- sample.urls$EIN[sample.urls$ORGURL == original_URL]
result$org_name <- sample.urls$ORGNAME[sample.urls$ORGURL == original_URL]
result$original_URL <- original_URL
result$normalized_URL <- normalized_URL
result$redirected_URL <- redirected_URL
result$root_URL <- root_URL
result$active_URL <- active_URL
result$url_version <- url_version
result$domain_status <- domain_status
return( result )
}
create_table_01(sample.urls$ORGURL[2])
rm(normalized_URL)
create_table_01(sample.urls$ORGURL[2])
original_URL <- sample.urls$ORGURL[2]
result <- data.frame()
normalized_URL <- normalize_url( input.URL )
input.URL <- sample.urls$ORGURL[2]
original_URL <- input.URL
normalized_URL <- normalize_url( input.URL )
http_status_code <- httr::GET( normalized_URL )$all_headers[[1]]$status
is_redirected <- as.integer( http_status_code/100 ) == 3
redirected_URL <- ifelse( is_redirected, get_redirected_url( normalized_URL ), NA )
root_URL <- create_root_url( normalized_URL )
active_URL <- NA
url_version <- NA
domain_status <- NA
if( check_url_status2( original_URL ) == "VALID" ){
active_URL <- original_URL
url_version <- "original"
domain_status <- check_url_status2( original_URL )
} else if( check_url_status2( normalized_URL ) == "VALID" ){
active_URL <- normalized_URL
url_version <- "normalized"
domain_status <- check_url_status2( normalized_URL )
} else if( is_redirected ){
if( check_url_status2( redirected_URL ) == "VALID" ){
active_URL <- redirected_URL
url_version <- "redirect"
domain_status <- check_url_status2( redirected_URL )
}
} else{
if( check_url_status2( root_URL ) == "VALID" ){
active_URL <- root_URL
url_version <- "root"
domain_status <- check_url_status2( root_URL )
}
result$org_id <- sample.urls$EIN[sample.urls$ORGURL == original_URL]
create_table_01 <- function( input.URL ){
#result <- data.frame()
original_URL <- input.URL
normalized_URL <- normalize_url( input.URL )
http_status_code <- httr::GET( normalized_URL )$all_headers[[1]]$status
is_redirected <- as.integer( http_status_code/100 ) == 3
redirected_URL <- ifelse( is_redirected, get_redirected_url( normalized_URL ), NA )
root_URL <- create_root_url( normalized_URL )
active_URL <- NA
url_version <- NA
domain_status <- NA
if( check_url_status2( original_URL ) == "VALID" ){
active_URL <- original_URL
url_version <- "original"
domain_status <- check_url_status2( original_URL )
} else if( check_url_status2( normalized_URL ) == "VALID" ){
active_URL <- normalized_URL
url_version <- "normalized"
domain_status <- check_url_status2( normalized_URL )
} else if( is_redirected ){
if( check_url_status2( redirected_URL ) == "VALID" ){
active_URL <- redirected_URL
url_version <- "redirect"
domain_status <- check_url_status2( redirected_URL )
}
} else{
if( check_url_status2( root_URL ) == "VALID" ){
active_URL <- root_URL
url_version <- "root"
domain_status <- check_url_status2( root_URL )
}
result <- data.frame( org_id = sample.urls$EIN[sample.urls$ORGURL == original_URL],
org_name =  sample.urls$ORGNAME[sample.urls$ORGURL == original_URL],
original_URL,
normalized_URL,
redirected_URL,
root_URL,
active_URL,
url_version,
domain_status)
#result$org_id <- sample.urls$EIN[sample.urls$ORGURL == original_URL]
#result$org_name <- sample.urls$ORGNAME[sample.urls$ORGURL == original_URL]
#result$original_URL <- original_URL
#result$normalized_URL <- normalized_URL
#result$redirected_URL <- redirected_URL
#result$root_URL <- root_URL
#result$active_URL <- active_URL
#result$url_version <- url_version
#result$domain_status <- domain_status
return( result )
}
create_table_01(sample.urls$ORGURL[2])
save <- create_table_01(sample.urls$ORGURL[2])
View(save)
